{
  "author": "",
  "category": "Advanced",
  "extensionNamespace": "",
  "fullName": "Screen 3D",
  "helpPath": "",
  "iconUrl": "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjMsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iSWNvbnMiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQoJLnN0MXtmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEwO30NCjwvc3R5bGU+DQo8bGluZSBjbGFzcz0ic3QwIiB4MT0iMyIgeTE9IjE5IiB4Mj0iMTYiIHkyPSIxOSIvPg0KPGxpbmUgY2xhc3M9InN0MCIgeDE9IjgiIHkxPSIyOSIgeDI9IjE3IiB5Mj0iMjkiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0xMS4yLDI5YzEuMS0xLjQsMS44LTMuOSwxLjgtNkg1Yy0xLjEsMC0yLTAuOS0yLTJWNmMwLTEuMSwwLjktMiwyLTJoMjBjMS4xLDAsMiwwLjksMiwydjYiLz4NCjxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjI0IiBjeT0iMjAiIHI9IjUiLz4NCjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0yNSwyNWgtMmwtMi44LDIuMmMtMC43LDAuNi0wLjMsMS44LDAuNiwxLjhoNi4zYzAuOSwwLDEuNC0xLjIsMC42LTEuOEwyNSwyNXoiLz4NCjxjaXJjbGUgY2xhc3M9InN0MCIgY3g9IjI0IiBjeT0iMjAiIHI9IjEiLz4NCjwvc3ZnPg0K",
  "name": "Screen3D",
  "previewIconUrl": "https://asset-resources.gdevelop.io/public-resources/Icons/Line Hero Pack/Master/SVG/Computers and Hardware/074e55806addfad62799edce4ddd1bcb9d156cffb3e758dbde0ab0f4a197375b_Computers and Hardware_screen_webcam_web_camera.svg",
  "shortDescription": "With this extension you can create and manipulate 3d screens and cameras.",
  "version": "1.4.0",
  "description": "",
  "tags": [
    "3d",
    "mirror",
    "graphic"
  ],
  "authorIds": [
    "iCuOTzgvSYOOXr4HW0sFJLIaP082"
  ],
  "dependencies": [],
  "globalVariables": [],
  "sceneVariables": [
    {
      "name": "Screens",
      "type": "array",
      "children": []
    }
  ],
  "eventsFunctions": [
    {
      "description": "Create 3d screen.",
      "fullName": "Create 3d screen",
      "functionType": "Action",
      "name": "Plane",
      "sentence": "Create 3d screen with X: _PARAM1_, Y: _PARAM2_, Z: _PARAM3_, X rotation: _PARAM4_, Y rotation: _PARAM5_, Z rotation: _PARAM6_, width: _PARAM7_, height: _PARAM8_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "class RenderPlane extends THREE.Mesh {",
            "    constructor(geometry, options = {}) {",
            "        super(geometry);",
            "",
            "        const scope = this;",
            "        const textureWidth = options.textureWidth || 512;",
            "        const textureHeight = options.textureHeight || 512;",
            "",
            "        const renderTarget = new THREE.WebGLRenderTarget(textureWidth, textureHeight);",
            "        const renderCamera = new THREE.PerspectiveCamera();",
            "",
            "        // Сохраняем камеру как свойство объекта, чтобы можно было управлять ею извне",
            "        scope.renderCamera = renderCamera;",
            "",
            "        const material = new THREE.MeshBasicMaterial({",
            "            map: renderTarget.texture,",
            "            side: THREE.DoubleSide",
            "        });",
            "",
            "        scope.material = material;",
            "",
            "        // Флаг для предотвращения рекурсии",
            "        let isRendering = false;",
            "",
            "        scope.onBeforeRender = function (renderer, scene, camera) {",
            "            if (isRendering) return; // Если уже в процессе рендеринга, выходим",
            "            isRendering = true;",
            "",
            "            const currentRenderTarget = renderer.getRenderTarget();",
            "            const currentXrEnabled = renderer.xr.enabled;",
            "            const currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;",
            "",
            "            renderer.xr.enabled = false;",
            "            renderer.shadowMap.autoUpdate = false;",
            "",
            "            renderer.setRenderTarget(renderTarget);",
            "            renderer.state.buffers.depth.setMask(true);",
            "",
            "            if (renderer.autoClear === false) renderer.clear();",
            "            renderer.render(scene, renderCamera);",
            "",
            "            renderer.xr.enabled = currentXrEnabled;",
            "            renderer.shadowMap.autoUpdate = currentShadowAutoUpdate;",
            "            renderer.setRenderTarget(currentRenderTarget);",
            "",
            "            const viewport = camera.viewport;",
            "            if (viewport !== undefined) {",
            "                renderer.state.viewport(viewport);",
            "            }",
            "",
            "            isRendering = false; // Завершаем рендеринг",
            "        };",
            "    }",
            "",
            "    // Метод для перемещения камеры",
            "    setCameraPosition(x, y, z) {",
            "        this.renderCamera.position.set(x, y, z);",
            "    }",
            "",
            "    // Метод для поворота камеры (в радианах)",
            "    setCameraRotation(rx, ry, rz) {",
            "        this.renderCamera.rotation.set(rx, ry, rz);",
            "    }",
            "",
            "    // Метод для перемещения камеры относительно текущей позиции",
            "    moveCamera(dx, dy, dz) {",
            "        this.renderCamera.position.x += dx;",
            "        this.renderCamera.position.y += dy;",
            "        this.renderCamera.position.z += dz;",
            "    }",
            "",
            "    // Метод для поворота камеры относительно текущего угла (в радианах)",
            "    rotateCamera(drx, dry, drz) {",
            "        this.renderCamera.rotation.x += drx;",
            "        this.renderCamera.rotation.y += dry;",
            "        this.renderCamera.rotation.z += drz;",
            "    }",
            "}",
            "",
            "// Получаем рендерер, сцену и камеру из GDevelop",
            "const renderer = runtimeScene.getGame().getRenderer().getThreeRenderer();",
            "const scene3D = runtimeScene.getLayer('Base layer').getRenderer().getThreeScene();",
            "const camera = runtimeScene.getLayer('Base layer').getRenderer().getThreeCamera();",
            "",
            "const x = eventsFunctionContext.getArgument(\"X\");",
            "const y = eventsFunctionContext.getArgument(\"Y\");",
            "const z = eventsFunctionContext.getArgument(\"Z\");",
            "const rx = eventsFunctionContext.getArgument(\"RX\");",
            "const ry = eventsFunctionContext.getArgument(\"RY\");",
            "const rz = eventsFunctionContext.getArgument(\"RZ\");",
            "const w = eventsFunctionContext.getArgument(\"Wi\");",
            "const h = eventsFunctionContext.getArgument(\"He\");",
            "",
            "// Создаем геометрию для плоскости",
            "const planeGeometry = new THREE.PlaneGeometry(w, h);",
            "const renCam = new THREE.PerspectiveCamera();",
            "// Создаем плоскость с отдельной камерой",
            "const renderPlane = new RenderPlane(planeGeometry, {",
            "    textureWidth: 1024,",
            "    textureHeight: 1024,",
            "    renderCamera: renCam",
            "});",
            "",
            "// Позиционируем плоскость",
            "renderPlane.rotation.x = rx;",
            "renderPlane.rotation.y = ry;",
            "renderPlane.rotation.z = rz;",
            "renderPlane.position.set(x, y, z);",
            "renderPlane.setCameraPosition(x, y, z);",
            "",
            "// Добавляем плоскость в сцену",
            "scene3D.add(renderPlane);",
            "renderPlane.setCameraRotation(rx,ry,rz);",
            "// Сохраняем плоскость",
            "const planeArray = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\");",
            "planeArray._pushVariable(renderPlane);",
            "",
            "// Пример использования методов для управления камерой:",
            "// renderPlane.setCameraPosition(10, 5, 0); // Устанавливаем позицию камеры",
            "// renderPlane.setCameraRotation(0, Math.PI / 2, 0); // Поворачиваем камеру на 90 градусов по оси Y",
            "// renderPlane.moveCamera(1, 0, 0); // Перемещаем камеру на 1 единицу по оси X",
            "// renderPlane.rotateCamera(0, 0, Math.PI / 4); // Поворачиваем камеру на 45 градусов по оси Z"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": true
        }
      ],
      "parameters": [
        {
          "description": "X",
          "name": "X",
          "type": "expression"
        },
        {
          "description": "Y",
          "name": "Y",
          "type": "expression"
        },
        {
          "description": "Z",
          "name": "Z",
          "type": "expression"
        },
        {
          "description": "Rotation X",
          "name": "RX",
          "type": "expression"
        },
        {
          "description": "Rotation Y",
          "name": "RY",
          "type": "expression"
        },
        {
          "description": "Rotation Z",
          "name": "RZ",
          "type": "expression"
        },
        {
          "description": "Width",
          "name": "Wi",
          "type": "expression"
        },
        {
          "description": "Height",
          "name": "He",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Create round 3d screen.",
      "fullName": "Create round 3d screen",
      "functionType": "Action",
      "name": "RoundPlane",
      "sentence": "Create round 3d screen with X: _PARAM1_, Y: _PARAM2_, Z: _PARAM3_, X rotation: _PARAM4_, Y rotation: _PARAM5_, Z rotation: _PARAM6_, radius: _PARAM7_, sectors: _PARAM8_, X scale: _PARAM9_, Y scale: _PARAM10_, Z scale: _PARAM11_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "class RenderPlane extends THREE.Mesh {",
            "    constructor(geometry, options = {}) {",
            "        super(geometry);",
            "",
            "        const scope = this;",
            "        const textureWidth = options.textureWidth || 512;",
            "        const textureHeight = options.textureHeight || 512;",
            "",
            "        const renderTarget = new THREE.WebGLRenderTarget(textureWidth, textureHeight);",
            "        const renderCamera = new THREE.PerspectiveCamera();",
            "",
            "        // Сохраняем камеру как свойство объекта, чтобы можно было управлять ею извне",
            "        scope.renderCamera = renderCamera;",
            "",
            "        const material = new THREE.MeshBasicMaterial({",
            "            map: renderTarget.texture,",
            "            side: THREE.DoubleSide",
            "        });",
            "",
            "        scope.material = material;",
            "",
            "        // Флаг для предотвращения рекурсии",
            "        let isRendering = false;",
            "",
            "        scope.onBeforeRender = function (renderer, scene, camera) {",
            "            if (isRendering) return; // Если уже в процессе рендеринга, выходим",
            "            isRendering = true;",
            "",
            "            const currentRenderTarget = renderer.getRenderTarget();",
            "            const currentXrEnabled = renderer.xr.enabled;",
            "            const currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;",
            "",
            "            renderer.xr.enabled = false;",
            "            renderer.shadowMap.autoUpdate = false;",
            "",
            "            renderer.setRenderTarget(renderTarget);",
            "            renderer.state.buffers.depth.setMask(true);",
            "",
            "            if (renderer.autoClear === false) renderer.clear();",
            "            renderer.render(scene, renderCamera);",
            "",
            "            renderer.xr.enabled = currentXrEnabled;",
            "            renderer.shadowMap.autoUpdate = currentShadowAutoUpdate;",
            "            renderer.setRenderTarget(currentRenderTarget);",
            "",
            "            const viewport = camera.viewport;",
            "            if (viewport !== undefined) {",
            "                renderer.state.viewport(viewport);",
            "            }",
            "",
            "            isRendering = false; // Завершаем рендеринг",
            "        };",
            "    }",
            "",
            "    // Метод для перемещения камеры",
            "    setCameraPosition(x, y, z) {",
            "        this.renderCamera.position.set(x, y, z);",
            "    }",
            "",
            "    // Метод для поворота камеры (в радианах)",
            "    setCameraRotation(rx, ry, rz) {",
            "        this.renderCamera.rotation.set(rx, ry, rz);",
            "    }",
            "",
            "    // Метод для перемещения камеры относительно текущей позиции",
            "    moveCamera(dx, dy, dz) {",
            "        this.renderCamera.position.x += dx;",
            "        this.renderCamera.position.y += dy;",
            "        this.renderCamera.position.z += dz;",
            "    }",
            "",
            "    // Метод для поворота камеры относительно текущего угла (в радианах)",
            "    rotateCamera(drx, dry, drz) {",
            "        this.renderCamera.rotation.x += drx;",
            "        this.renderCamera.rotation.y += dry;",
            "        this.renderCamera.rotation.z += drz;",
            "    }",
            "}",
            "",
            "// Получаем рендерер, сцену и камеру из GDevelop",
            "const renderer = runtimeScene.getGame().getRenderer().getThreeRenderer();",
            "const scene3D = runtimeScene.getLayer('Base layer').getRenderer().getThreeScene();",
            "const camera = runtimeScene.getLayer('Base layer').getRenderer().getThreeCamera();",
            "",
            "const x = eventsFunctionContext.getArgument(\"X\");",
            "const y = eventsFunctionContext.getArgument(\"Y\");",
            "const z = eventsFunctionContext.getArgument(\"Z\");",
            "const rx = eventsFunctionContext.getArgument(\"RX\");",
            "const ry = eventsFunctionContext.getArgument(\"RY\");",
            "const rz = eventsFunctionContext.getArgument(\"RZ\");",
            "const w = eventsFunctionContext.getArgument(\"Wi\");",
            "const h = eventsFunctionContext.getArgument(\"He\");",
            "const xs = eventsFunctionContext.getArgument(\"XS\");",
            "const ys = eventsFunctionContext.getArgument(\"YS\");",
            "const zs = eventsFunctionContext.getArgument(\"ZS\");",
            "// Создаем геометрию для плоскости",
            "const planeGeometry = new THREE.CircleGeometry(w, h);",
            "const renCam = new THREE.PerspectiveCamera();",
            "// Создаем плоскость с отдельной камерой",
            "const renderPlane = new RenderPlane(planeGeometry, {",
            "    textureWidth: 1024,",
            "    textureHeight: 1024,",
            "    renderCamera: renCam",
            "});",
            "",
            "// Позиционируем плоскость",
            "renderPlane.rotation.x = rx;",
            "renderPlane.rotation.y = ry;",
            "renderPlane.rotation.z = rz;",
            "renderPlane.position.set(x, y, z);",
            "renderPlane.setCameraPosition(x, y, z);",
            "",
            "renderPlane.scale.x = xs;",
            "renderPlane.scale.y = ys;",
            "renderPlane.scale.z = zs;",
            "",
            "// Добавляем плоскость в сцену",
            "scene3D.add(renderPlane);",
            "renderPlane.setCameraRotation(rx,ry,rz);",
            "// Сохраняем плоскость",
            "const planeArray = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\");",
            "planeArray._pushVariable(renderPlane);",
            "",
            "// Пример использования методов для управления камерой:",
            "// renderPlane.setCameraPosition(10, 5, 0); // Устанавливаем позицию камеры",
            "// renderPlane.setCameraRotation(0, Math.PI / 2, 0); // Поворачиваем камеру на 90 градусов по оси Y",
            "// renderPlane.moveCamera(1, 0, 0); // Перемещаем камеру на 1 единицу по оси X",
            "// renderPlane.rotateCamera(0, 0, Math.PI / 4); // Поворачиваем камеру на 45 градусов по оси Z"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": true
        }
      ],
      "parameters": [
        {
          "description": "X",
          "name": "X",
          "type": "expression"
        },
        {
          "description": "Y",
          "name": "Y",
          "type": "expression"
        },
        {
          "description": "Z",
          "name": "Z",
          "type": "expression"
        },
        {
          "description": "Rotation X",
          "name": "RX",
          "type": "expression"
        },
        {
          "description": "Rotation Y",
          "name": "RY",
          "type": "expression"
        },
        {
          "description": "Rotation Z",
          "name": "RZ",
          "type": "expression"
        },
        {
          "description": "Radius",
          "name": "Wi",
          "type": "expression"
        },
        {
          "description": "Number of sectors. Default: 32",
          "name": "He",
          "type": "expression"
        },
        {
          "description": "X scale. Default: 1",
          "name": "XS",
          "type": "expression"
        },
        {
          "description": "Y scale. Default: 1",
          "name": "YS",
          "type": "expression"
        },
        {
          "description": "Z scale. Default: 1",
          "name": "ZS",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Remove screen.",
      "fullName": "Remove screen",
      "functionType": "Action",
      "name": "Delete",
      "sentence": "Remove mirror number _PARAM1_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const number = eventsFunctionContext.getArgument(\"Mirr\");",
            "const scene3D = runtimeScene.getLayer('Base layer').getRenderer().getThreeScene();",
            "const planeArray = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\");",
            "let mirror = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(number);",
            "if (mirror) {",
            "        // Освобождаем ресурсы",
            "        if (mirror.material.uniforms.mirrorSampler.value) {",
            "            mirror.material.uniforms.mirrorSampler.value.dispose();",
            "        }",
            "        mirror.geometry.dispose();",
            "        mirror.material.dispose();",
            "",
            "        // Удаляем зеркало из сцены",
            "        scene3D.remove(mirror);",
            "        planeArray.removeAtIndex(number);",
            "    }"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": true
        }
      ],
      "parameters": [
        {
          "description": "Mirror number",
          "name": "Mirr",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Move the screen.",
      "fullName": "Move screen",
      "functionType": "Action",
      "name": "MoveScreen",
      "sentence": "Move the screen number _PARAM1_: X: _PARAM2_; Y: _PARAM3_; Z: _PARAM4_. Mode: _PARAM5_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "CompareArgumentAsString"
              },
              "parameters": [
                "\"Mode\"",
                "=",
                "\"Set\""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "const x = eventsFunctionContext.getArgument(\"X\").valueOf();\r",
                "const y = eventsFunctionContext.getArgument(\"Y\").valueOf();\r",
                "const z = eventsFunctionContext.getArgument(\"Z\").valueOf();\r",
                "const numb = eventsFunctionContext.getArgument(\"Mirr\").valueOf();\r",
                "let mirror = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);\r",
                "mirror.position.x = x;\r",
                "mirror.position.y = y;\r",
                "mirror.position.z = z;"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "CompareArgumentAsString"
              },
              "parameters": [
                "\"Mode\"",
                "=",
                "\"Add\""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "const x = eventsFunctionContext.getArgument(\"X\").valueOf();\r",
                "const y = eventsFunctionContext.getArgument(\"Y\").valueOf();\r",
                "const z = eventsFunctionContext.getArgument(\"Z\").valueOf();\r",
                "const numb = eventsFunctionContext.getArgument(\"Mirr\").valueOf();\r",
                "let mirror = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);\r",
                "mirror.position.x += x;\r",
                "mirror.position.y += y;\r",
                "mirror.position.z += z;"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Mirror number",
          "name": "Mirr",
          "type": "expression"
        },
        {
          "description": "X",
          "name": "X",
          "type": "expression"
        },
        {
          "description": "Y",
          "name": "Y",
          "type": "expression"
        },
        {
          "description": "Z",
          "name": "Z",
          "type": "expression"
        },
        {
          "description": "Mode",
          "name": "Mode",
          "supplementaryInformation": "[\"Add\",\"Set\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Rotate the screen.",
      "fullName": "Rotate screen",
      "functionType": "Action",
      "name": "RotateScreen",
      "sentence": "Rotate the screen number _PARAM1_: X: _PARAM2_; Y: _PARAM3_; Z: _PARAM4_. Mode: _PARAM5_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "CompareArgumentAsString"
              },
              "parameters": [
                "\"Mode\"",
                "=",
                "\"Set\""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "const x = eventsFunctionContext.getArgument(\"X\").valueOf();\r",
                "const y = eventsFunctionContext.getArgument(\"Y\").valueOf();\r",
                "const z = eventsFunctionContext.getArgument(\"Z\").valueOf();\r",
                "const numb = eventsFunctionContext.getArgument(\"Mirr\").valueOf();\r",
                "let mirror = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);\r",
                "mirror.rotation.x = x;\r",
                "mirror.rotation.y = y;\r",
                "mirror.rotation.z = z;"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": true
            }
          ]
        },
        {
          "folded": true,
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "CompareArgumentAsString"
              },
              "parameters": [
                "\"Mode\"",
                "=",
                "\"Add\""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::JsCode",
              "inlineCode": [
                "const x = eventsFunctionContext.getArgument(\"X\").valueOf();\r",
                "const y = eventsFunctionContext.getArgument(\"Y\").valueOf();\r",
                "const z = eventsFunctionContext.getArgument(\"Z\").valueOf();\r",
                "const numb = eventsFunctionContext.getArgument(\"Mirr\").valueOf();\r",
                "const mirror = gdjs._cameras[numb];\r",
                "mirror.rotation.x += x;\r",
                "mirror.rotation.y += y;\r",
                "mirror.rotation.z += z;"
              ],
              "parameterObjects": "",
              "useStrict": true,
              "eventsSheetExpanded": false
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Mirror number",
          "name": "Mirr",
          "type": "expression"
        },
        {
          "description": "Rotation X",
          "name": "X",
          "type": "expression"
        },
        {
          "description": "Rotation Y",
          "name": "Y",
          "type": "expression"
        },
        {
          "description": "Rotation Z",
          "name": "Z",
          "type": "expression"
        },
        {
          "description": "Mode",
          "name": "Mode",
          "supplementaryInformation": "[\"Set\",\"Add\"]",
          "type": "stringWithSelector"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Add an object to screen as parent.",
      "fullName": "Add parent",
      "functionType": "Action",
      "name": "Parent",
      "sentence": "Add an object _PARAM2_ to screen _PARAM1_ as parent",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const ob = objects[0];",
            "const obj = objects[0].get3DRendererObject();",
            "const numb = eventsFunctionContext.getArgument(\"Mirr\");",
            "let mirror = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);",
            "obj.add(mirror);"
          ],
          "parameterObjects": "Parent",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Screen number",
          "name": "Mirr",
          "type": "expression"
        },
        {
          "description": "Parent",
          "name": "Parent",
          "supplementaryInformation": "Scene3D::Model3DObject",
          "type": "objectList"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Add an object to camera as parent.",
      "fullName": "Add parent to camera",
      "functionType": "Action",
      "name": "CamParent",
      "sentence": "Add an object _PARAM2_ to camera _PARAM1_ as parent",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const ob = objects[0];",
            "const obj = objects[0].get3DRendererObject();",
            "const numb = eventsFunctionContext.getArgument(\"Mirr\");",
            "let mirror = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);",
            "obj.add(mirror.renderCamera);"
          ],
          "parameterObjects": "Parent",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Screen number",
          "name": "Mirr",
          "type": "expression"
        },
        {
          "description": "Parent",
          "name": "Parent",
          "supplementaryInformation": "Scene3D::Model3DObject",
          "type": "objectList"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Detach a screen from parent.",
      "fullName": "Detach screen from parent",
      "functionType": "Action",
      "name": "Detach",
      "sentence": "Detach a screen _PARAM1_ from parent _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const ob = objects[0];",
            "const obj = objects[0].get3DRendererObject();",
            "const numb = eventsFunctionContext.getArgument(\"Mirr\");",
            "let mirror = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);",
            "obj.remove(mirror);"
          ],
          "parameterObjects": "Parent",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Screen number",
          "name": "Mirr",
          "type": "expression"
        },
        {
          "description": "Parent",
          "name": "Parent",
          "supplementaryInformation": "Scene3D::Model3DObject",
          "type": "objectList"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Detach a screen from parent.",
      "fullName": "Detach screen from parent",
      "functionType": "Action",
      "name": "CamDetach",
      "sentence": "Detach a screen _PARAM1_ from parent _PARAM2_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const ob = objects[0];",
            "const obj = objects[0].get3DRendererObject();",
            "const numb = eventsFunctionContext.getArgument(\"Mirr\");",
            "let mirror = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);",
            "obj.remove(mirror.renderCamera);"
          ],
          "parameterObjects": "Parent",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Screen number",
          "name": "Mirr",
          "type": "expression"
        },
        {
          "description": "Parent",
          "name": "Parent",
          "supplementaryInformation": "Scene3D::Model3DObject",
          "type": "objectList"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Set camera position.",
      "fullName": "Set camera position",
      "functionType": "Action",
      "name": "SetCameraPos",
      "sentence": "Set camera position of screen _PARAM1_: X: _PARAM2_, Y: _PARAM3_, Z: _PARAM4_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const numb = eventsFunctionContext.getArgument(\"Screen\");\r",
            "const plane = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);\r",
            "const x = eventsFunctionContext.getArgument(\"X\");\r",
            "const y = eventsFunctionContext.getArgument(\"Y\");\r",
            "const z = eventsFunctionContext.getArgument(\"Z\");\r",
            "plane.setCameraPosition(x, y, z);\r",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Screen number",
          "name": "Screen",
          "type": "expression"
        },
        {
          "description": "X",
          "name": "X",
          "type": "expression"
        },
        {
          "description": "Y",
          "name": "Y",
          "type": "expression"
        },
        {
          "description": "Z",
          "name": "Z",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Move camera.",
      "fullName": "Move camera",
      "functionType": "Action",
      "name": "MoveCamera",
      "sentence": "Move camera of screen _PARAM1_: X: _PARAM2_, Y: _PARAM3_, Z: _PARAM4_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const numb = eventsFunctionContext.getArgument(\"Screen\");\r",
            "const plane = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);\r",
            "const x = eventsFunctionContext.getArgument(\"X\");\r",
            "const y = eventsFunctionContext.getArgument(\"Y\");\r",
            "const z = eventsFunctionContext.getArgument(\"Z\");\r",
            "plane.moveCamera(x, y, z);\r",
            ""
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Screen number",
          "name": "Screen",
          "type": "expression"
        },
        {
          "description": "X",
          "name": "X",
          "type": "expression"
        },
        {
          "description": "Y",
          "name": "Y",
          "type": "expression"
        },
        {
          "description": "Z",
          "name": "Z",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Set camera rotation.",
      "fullName": "Set camera rotation",
      "functionType": "Action",
      "name": "SetCameraRot",
      "sentence": "Set camera rotation of screen _PARAM1_: X: _PARAM2_, Y: _PARAM3_, Z: _PARAM4_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const numb = eventsFunctionContext.getArgument(\"Screen\");\r",
            "const renderPlane = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);\r",
            "const x = eventsFunctionContext.getArgument(\"X\");\r",
            "const y = eventsFunctionContext.getArgument(\"Y\");\r",
            "const z = eventsFunctionContext.getArgument(\"Z\");\r",
            "renderPlane.setCameraRotation(x, y, z);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Screen number",
          "name": "Screen",
          "type": "expression"
        },
        {
          "description": "X",
          "name": "X",
          "type": "expression"
        },
        {
          "description": "Y",
          "name": "Y",
          "type": "expression"
        },
        {
          "description": "Z",
          "name": "Z",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Rotate camera.",
      "fullName": "Rotate camera",
      "functionType": "Action",
      "name": "RotateCamera",
      "sentence": "Rotate camera of screen _PARAM1_: X: _PARAM2_, Y: _PARAM3_, Z: _PARAM4_",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const numb = eventsFunctionContext.getArgument(\"Screen\");\r",
            "const renderPlane = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);\r",
            "const x = eventsFunctionContext.getArgument(\"X\");\r",
            "const y = eventsFunctionContext.getArgument(\"Y\");\r",
            "const z = eventsFunctionContext.getArgument(\"Z\");\r",
            "renderPlane.rotateCamera(x, y, z);"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "parameters": [
        {
          "description": "Screen number",
          "name": "Screen",
          "type": "expression"
        },
        {
          "description": "X",
          "name": "X",
          "type": "expression"
        },
        {
          "description": "Y",
          "name": "Y",
          "type": "expression"
        },
        {
          "description": "Z",
          "name": "Z",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Return the number of screens on the scene.",
      "fullName": "Number of screens",
      "functionType": "Expression",
      "name": "NumberOfScreens",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const mirr = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\");",
            "eventsFunctionContext.returnValue = mirr.getChildrenCount();"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [],
      "objectGroups": []
    },
    {
      "description": "Get X.",
      "fullName": "Get X",
      "functionType": "Expression",
      "name": "GetX",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const numb = eventsFunctionContext.getArgument(\"Mirr\").valueOf();",
            "const mirror = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);",
            "eventsFunctionContext.returnValue = mirror.position.x;"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Mirror number",
          "name": "Mirr",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Get Y.",
      "fullName": "Get Y",
      "functionType": "Expression",
      "name": "GetY",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const numb = eventsFunctionContext.getArgument(\"Mirr\").valueOf();",
            "const mirror = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);",
            "eventsFunctionContext.returnValue = mirror.position.y;"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Mirror number",
          "name": "Mirr",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Get Z.",
      "fullName": "Get Z",
      "functionType": "Expression",
      "name": "GetZ",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const numb = eventsFunctionContext.getArgument(\"Mirr\").valueOf();",
            "const mirror = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);",
            "eventsFunctionContext.returnValue = mirror.position.z;"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Mirror number",
          "name": "Mirr",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Get X rotation.",
      "fullName": "Get X rotation ",
      "functionType": "Expression",
      "name": "GetRotationX",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const numb = eventsFunctionContext.getArgument(\"Mirr\").valueOf();",
            "const mirror = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);",
            "eventsFunctionContext.returnValue = mirror.rotation.x;"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Mirror number",
          "name": "Mirr",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Get Y rotation.",
      "fullName": "Get Y rotation ",
      "functionType": "Expression",
      "name": "GetRotationY",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const numb = eventsFunctionContext.getArgument(\"Mirr\").valueOf();",
            "const mirror = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);",
            "eventsFunctionContext.returnValue = mirror.rotation.y;"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Mirror number",
          "name": "Mirr",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Get Z rotation.",
      "fullName": "Get Z rotation ",
      "functionType": "Expression",
      "name": "GetRotationZ",
      "sentence": "",
      "events": [
        {
          "type": "BuiltinCommonInstructions::JsCode",
          "inlineCode": [
            "const numb = eventsFunctionContext.getArgument(\"Mirr\").valueOf();",
            "const mirror = runtimeScene.getVariablesForExtension(\"Screen3D\").get(\"Screens\").getChildAt(numb);",
            "eventsFunctionContext.returnValue = mirror.rotation.z;"
          ],
          "parameterObjects": "",
          "useStrict": true,
          "eventsSheetExpanded": false
        }
      ],
      "expressionType": {
        "type": "expression"
      },
      "parameters": [
        {
          "description": "Mirror number",
          "name": "Mirr",
          "type": "expression"
        }
      ],
      "objectGroups": []
    },
    {
      "description": "Check if the mirror is existing.",
      "fullName": "Is existing",
      "functionType": "Condition",
      "name": "IsExisting",
      "sentence": "Mirror number _PARAM1_ is existing",
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BuiltinCommonInstructions::CompareNumbers"
              },
              "parameters": [
                "Mirr",
                ">=",
                "Screen3D::NumberOfScreens()"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "False"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "BuiltinCommonInstructions::CompareNumbers"
              },
              "parameters": [
                "Mirr",
                "<",
                "Screen3D::NumberOfScreens()"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetReturnBoolean"
              },
              "parameters": [
                "True"
              ]
            }
          ]
        }
      ],
      "parameters": [
        {
          "description": "Mirror number",
          "name": "Mirr",
          "type": "expression"
        }
      ],
      "objectGroups": []
    }
  ],
  "eventsBasedBehaviors": [],
  "eventsBasedObjects": []
}